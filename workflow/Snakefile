# Snakemake Workflow for Gesenius Data 

configfile: "../config/config.yaml"
bhsa_packages = ["etcbc/bhsa", "etcbc/genre_synvar", "etcbc/valence"]

# Need to complete the gitclone rule begun below
# see: https://github.com/snakemake/snakemake/issues/350
# rule get_bhsa:
#     output:
#         directory(expand("~/github/{package}", package=bhsa_packages))
#     shell:
#         """
#         if [[! -d "{wildcards.package}" ]]; then
#             git clone https://github.com/{}    
#         """

rule get_samples:
    input:
        "/Users/cody/github/etcbc/bhsa/tf/c"
    output:
        directory("../results/samples"),
        expand("../results/samples/{verb}.json", verb=config["verb_forms"])
    script:
        "scripts/bhsa/get_samples.py"

bhsa_script="scripts/bhsa/build_bhsa_tables.py"
rule bhsa_tables:
    input:
        samples=expand("../results/samples/{verb}.json", verb=config["verb_forms"]),
        tf_mods=expand("/Users/cody/github/{package}/tf/c", package=bhsa_packages),
        script=bhsa_script
    params:
        outdir="../results/csv"
    output:
        "../results/csv/{verb}/bhsa.csv",
        "../results/csv/{verb}/bhsa_clrela.csv",
    script:
        bhsa_script

# rule lxx_tables:

# rule eng_tables:

# rule table_corrections:
